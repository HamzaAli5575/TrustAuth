{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter,Routes,Route,Navigate}from'react-router-dom';import{Helmet,HelmetProvider}from'react-helmet';import Auth from'./components/Auth';import Dashboard from'./components/Dashboard';import Callback from'./components/Callback';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{const savedUser=localStorage.getItem('user');if(savedUser){setUser(JSON.parse(savedUser));}setLoading(false);},[]);const handleLogin=userData=>{setUser(userData);};const handleLogout=currentUser=>{const isKeycloak=currentUser&&currentUser.provider==='keycloak';if(isKeycloak){const logoutKeycloak=window.confirm(\"You are logged in via Keycloak. Do you want to logout of Keycloak as well?\");if(logoutKeycloak){localStorage.clear();setUser(null);window.location.href='http://localhost:8080/realms/r-realm/protocol/openid-connect/logout?redirect_uri=http://localhost:3000/';}else{localStorage.clear();setUser(null);}}else{localStorage.clear();setUser(null);}};if(loading)return/*#__PURE__*/_jsx(\"div\",{style:{height:'100vh',background:'#f1f5f9',display:'grid',placeItems:'center',fontSize:'1.2rem',color:'#0ea5e9'},children:\"Loading App...\"});return/*#__PURE__*/_jsxs(HelmetProvider,{children:[/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsx(\"meta\",{name:\"generator\",content:\"TrustAuth Enterprise\"}),/*#__PURE__*/_jsx(\"meta\",{\"http-equiv\":\"X-Content-Type-Options\",content:\"nosniff\"}),/*#__PURE__*/_jsx(\"meta\",{name:\"referrer\",content:\"no-referrer\"}),/*#__PURE__*/_jsx(\"meta\",{\"http-equiv\":\"X-XSS-Protection\",content:\"1; mode=block\"}),/*#__PURE__*/_jsx(\"meta\",{\"http-equiv\":\"X-Frame-Options\",content:\"DENY\"})]}),/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:!user?/*#__PURE__*/_jsx(Auth,{onLogin:handleLogin}):/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\"})}),/*#__PURE__*/_jsx(Route,{path:\"/auth/callback\",element:/*#__PURE__*/_jsx(Callback,{})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:user?/*#__PURE__*/_jsx(Dashboard,{user:user,onLogout:handleLogout}):/*#__PURE__*/_jsx(Navigate,{to:\"/\"})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\"})})]})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Routes","Route","Navigate","Helmet","HelmetProvider","Auth","Dashboard","Callback","jsx","_jsx","jsxs","_jsxs","App","user","setUser","loading","setLoading","savedUser","localStorage","getItem","JSON","parse","handleLogin","userData","handleLogout","currentUser","isKeycloak","provider","logoutKeycloak","window","confirm","clear","location","href","style","height","background","display","placeItems","fontSize","color","children","name","content","path","element","onLogin","to","onLogout"],"sources":["C:/Users/Hp/Desktop/work/InterviewProject/AuthProject/r-auth-native/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom';\nimport { Helmet, HelmetProvider } from 'react-helmet';\nimport Auth from './components/Auth';\nimport Dashboard from './components/Dashboard';\nimport Callback from './components/Callback';\nimport './App.css';\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const savedUser = localStorage.getItem('user');\n    if (savedUser) {\n      setUser(JSON.parse(savedUser));\n    }\n    setLoading(false);\n  }, []);\n\n  const handleLogin = (userData) => {\n    setUser(userData);\n  };\n\n  const handleLogout = (currentUser) => {\n    const isKeycloak = currentUser && currentUser.provider === 'keycloak';\n\n    if (isKeycloak) {\n      const logoutKeycloak = window.confirm(\"You are logged in via Keycloak. Do you want to logout of Keycloak as well?\");\n      if (logoutKeycloak) {\n        localStorage.clear();\n        setUser(null);\n        window.location.href = 'http://localhost:8080/realms/r-realm/protocol/openid-connect/logout?redirect_uri=http://localhost:3000/';\n      } else {\n        localStorage.clear();\n        setUser(null);\n      }\n    } else {\n      localStorage.clear();\n      setUser(null);\n    }\n  };\n\n  if (loading) return <div style={{height:'100vh', background:'#f1f5f9', display:'grid', placeItems:'center', fontSize:'1.2rem', color:'#0ea5e9'}}>Loading App...</div>;\n\n  return (\n    <HelmetProvider>\n      {/* SECURITY HEADERS */}\n      <Helmet>\n        {/* Hides technology stack from network sniffers */}\n        <meta name=\"generator\" content=\"TrustAuth Enterprise\" />\n        \n        {/* Prevents content sniffing (makes it harder to analyze API calls) */}\n        <meta http-equiv=\"X-Content-Type-Options\" content=\"nosniff\" />\n        \n        {/* Clickjacking Protection (Prevents hijacking clicks) */}\n        <meta name=\"referrer\" content=\"no-referrer\" />\n        \n        {/* XSS Protection (Prevents reflection attacks) */}\n        <meta http-equiv=\"X-XSS-Protection\" content=\"1; mode=block\" />\n        \n        {/* Frame Options (Prevents clickjacking via iframes) */}\n        <meta http-equiv=\"X-Frame-Options\" content=\"DENY\" />\n        \n        {/* Strict Transport Security (When you buy a real domain, enable this) */}\n        {/* <meta http-equiv=\"Strict-Transport-Security\" content=\"max-age=31536000; includeSubDomains; preload\" /> */}\n      </Helmet>\n\n      <BrowserRouter>\n        <Routes>\n          <Route path=\"/\" element={!user ? <Auth onLogin={handleLogin} /> : <Navigate to=\"/dashboard\" />} />\n          <Route path=\"/auth/callback\" element={<Callback />} />\n          <Route path=\"/dashboard\" element={user ? <Dashboard user={user} onLogout={handleLogout} /> : <Navigate to=\"/\" />} />\n          <Route path=\"*\" element={<Navigate to=\"/\" />} />\n        </Routes>\n      </BrowserRouter>\n    </HelmetProvider>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}